===============================================================
予約詳細画面
===============================================================

.. topic:: 画面レイアウト

    .. figure:: ../../img/予約詳細画面.png
        :align: center

        予約詳細画面

.. topic:: 構成一覧

    .. list-table:: 予約詳細画面
        :header-rows: 1
        :align: center

        * - 識別ID
          - 項目名
          - 種別
          - 説明
        * - ①
          - 生産者アイコン
          - アイコン
          - 出品した生産者の区分を示すアイコン。

            * 生産者が個人か法人かでアイコンを変える

        * - ②
          - 生産者名ラベル
          - ラベル
          - 出品した生産者の名前を表示するラベル。
        * - ③
          - 作物名ラベル
          - ラベル
          - 出品された作物の名称を表示するラベル。
        * - ④
          - 出品画像
          - イメージ
          - 出品されたときにアップロードされた画像を表示するイメージ領域。

            * 画像が無い場合にはデフォルト画像を表示する

        * - ⑤
          - 数量ラベル
          - ラベル
          - 予約内容の数量を表示するラベル。
        * - ⑥
          - 合計金額ラベル
          - ラベル
          - 予約内容の合計金額を表示するラベル。
        * - ⑦
          - 予約者名ラベル
          - ラベル
          - 予約者の名前を表示するラベル。
        * - ⑧
          - 希望日ラベル
          - ラベル
          - 予約内容の受取り希望日を表示するラベル。
        * - ⑨
          - 場所ラベル
          - ラベル
          - 予約内容の受取り場所とその住所を表示するラベル。
        * - ⑩
          - 出荷ボタン
          - ボタン
          - 生産者が作物を出荷したことを連絡するボタン。

            * 自身が出品した生産者の場合のみ表示する
            * 予約内容のステータスが出荷準備中の場合のみ表示する
            * 押下すると出荷ウィザードダイアログを開く

        * - ⑪
          - 店舗預かりボタン
          - ボタン
          - 引渡し業者が作物を店舗で預かっていることを連絡するボタン。

            * 自身が受け取り場所に指定された引渡し業者のみ表示する
            * 予約内容のステータスが集荷配送中の場合のみ表示する
            * 押下すると店舗預かり確認ダイアログを開く

        * - ⑫
          - 受取りボタン
          - ボタン
          - 消費者が予約した作物の受取りを連絡するボタン。

            * 自身が予約した消費者の場合のみ表示する
            * 予約内容のステータスが店舗保管中の場合のみ表示する
            * 押下すると受取り確認ダイアログを開く

        * - ⑬
          - 編集ボタン
          - ボタン
          - 編集画面に遷移するボタン。

            * 消費者の場合のみ表示する
            * 予約内容のステータスが出荷準備中の場合のみ表示する
            * 押下すると予約編集画面に遷移する

        * - ⑭
          - 予約取り消しボタン
          - ボタン
          - 消費者が予約を取り消すボタン。

            * 消費者の場合のみ表示する
            * 予約内容のステータスが出荷準備中の場合のみ表示する
            * 押下すると確認ダイアログを開く
            * 確認ダイアログでキャンセルボタンを押下した場合、確認ダイアログを閉じる
            * 確認ダイアログで予約取り消しボタンを押下した場合、予約の取り消し処理し、確認ダイアログを閉じる

        * - ⑮
          - ステータスラベル
          - ラベル
          - 予約のステータスを表示するラベル。

---------------------------------------------------------------
出荷ウィザードダイアログ
---------------------------------------------------------------

***************************************************************
配送者選択ステップ
***************************************************************

.. topic:: 画面レイアウト

    .. figure:: ../../img/出荷ウィザードダイアログ_配送者選択ステップ.png
        :align: center

        配送者選択ステップ

.. topic:: 構成一覧

    .. list-table:: 配送者選択ステップ
        :header-rows: 1
        :align: center

        * - 識別ID
          - 項目名
          - 種別
          - 説明
        * - ①
          - 作業ステップ
          - プログレス
          - 出荷ウィザードの現在の作業ステップを示すプログレス。

            * 配送者選択ステップはステップ１

        * - ②
          - 選択メッセージ
          - ラベル
          - 配送者の選択を促すメッセージ。
        * - ③
          - 配送者選択欄
          - コンボボックス
          - 配送者選択欄のコンボボックス。

            * 必須入力
            * 選択肢：生産者自身と物流業者として登録されているアカウントの一覧

        * - ④
          - 次へボタン
          - ボタン
          - 次のステップに移るボタン。

            * 配送者を選択している場合のみボタンの押下が可能
            * 次へボタンを押下した場合、次のステップとなる配送便選択ステップを表示する

***************************************************************
配送便選択ステップ
***************************************************************

.. topic:: 画面レイアウト

    .. figure:: ../../img/出荷ウィザードダイアログ_配送便選択ステップ.png
        :align: center

        配送便選択ステップ

.. topic:: 構成一覧

    .. list-table:: 配送便選択ステップ
        :header-rows: 1
        :align: center

        * - 識別ID
          - 項目名
          - 種別
          - 説明
        * - ①
          - 作業ステップ
          - ステッププログレス
          - 出荷ウィザードの現在の作業ステップを示すプログレス。

            * 配送便選択ステップはステップ２

        * - ②
          - 選択メッセージ
          - ラベル
          - 配送便の選択を促すメッセージ。

            * 配送者選択ステップで選択された配送者が生産者自身である場合は、配送便の選択は不要であるため次へ進むこと促すメッセージを表示する
            * 配送者選択ステップで選択された配送者が物流業者でかつ配送者の物流設定で集荷・配送方法が「集荷先や配送先に直接伺う」である場合は、配送便の選択は不要であるため次へ進むこと促すメッセージを表示する
            * 配送者選択ステップで選択された配送者が物流業者でかつ配送者の物流設定で集荷・配送方法が「巡回経路で集荷や配送を行う」である場合は、配送便の選択を促すメッセージを表示する

        * - ③
          - 配送便候補一覧表
          - テーブル
          - | 配送便の候補となる一覧を表示するテーブル。
            | 配送便の候補となる一覧は、現在時刻の2時間後以降で最も近い最大３件分まで（当日に該当する便がひとつもない場合は翌日以降からも選定する）とし、以下の条件を満たす便を表示する。

            * 配送者選択ステップで選択された配送者が物流業者でかつ物流設定で集荷・配送方法が「巡回経路で集荷や配送を行う」となっている
            * 物流業者向け物流設定の物流定義において、出品した生産者の最寄りのバス停（生産者向け物流設定）から予約時に設定した受取り場所となる引渡し業者の最寄りのバス停（引き渡し業者向け物流設定）へ向かう経路がある便
            * 出品における混載定義の条件を満たす便
            * 最大取扱い量に達していない便

        * - ④
          - ヘッダー行
          - テーブルヘッダー行
          - 配送便候補一覧表のヘッダー行。
        * - ⑤
          - データ行
          - テーブルデータ行
          - 配送便候補一覧表のデータ行リンク。

            * 行をクリックすると便を選択できる

        * - ⑥
          - 路線列
          - テーブル列＋ラベル
          - 路線の名称を表示する列。

            * ヘッダー行には「路線」と表示する
            * データ行には路線の名称を表示する

        * - ⑦
          - 便名列
          - テーブル列＋ラベル
          - 便名を表示する列。

            * ヘッダー行には「便名」と表示する
            * データ行には便名を表示する

        * - ⑧
          - 集荷場所列
          - テーブル列＋ラベル
          - 集荷場所の名称を表示する列。

            * ヘッダー行には「集荷場所」と表示する
            * データ行には集荷場所の名称を表示する

        * - ⑨
          - 集荷予定日時列
          - テーブル列＋ラベル
          - 集荷予定日時を表示する列。

            * ヘッダー行には「集荷予定日時」と表示する
            * データ行には集荷予定日時を表示する

        * - ⑩
          - 前へボタン
          - ボタン
          - 前のステップに移るボタン。

            * 前へボタンを押下した場合、前のステップとなる配送者選択ステップを表示する

        * - ⑪
          - 次へボタン
          - ボタン
          - 次のステップに移るボタン。

            * 配送者選択ステップで選択された配送者が物流業者でかつ配送者の物流設定で集荷・配送方法が「巡回経路で集荷や配送を行う」である場合は、配送便を選択した状態でのみボタンの押下が可能
            * 次へボタンを押下した場合、次のステップとなる出荷確認ステップを表示する

***************************************************************
出荷確認ステップ
***************************************************************

.. topic:: 画面レイアウト

    .. figure:: ../../img/出荷ウィザードダイアログ_出荷確認ステップ.png
        :align: center

        出荷確認ステップ

.. topic:: 構成一覧

    .. list-table:: 出荷確認ステップ
        :header-rows: 1
        :align: center

        * - 識別ID
          - 項目名
          - 種別
          - 説明
        * - ①
          - 作業ステップ
          - ステッププログレス
          - 出荷ウィザードの現在の作業ステップを示すプログレス。

            * 出荷確認ステップはステップ３

        * - ②
          - 確認メッセージ
          - ラベル
          - 出荷の確認を促すメッセージ。
        * - ③
          - 前へボタン
          - ボタン
          - 前のステップに移るボタン。

            * 前へボタンを押下した場合、前のステップとなる配送便選択ステップを表示する

        * - ④
          - 出荷ボタン
          - ボタン
          - 出荷を処理するボタン。

            * 出荷ボタンを押下した場合、出荷を処理し、ダイアログを閉じる

---------------------------------------------------------------
店舗預かり確認ダイアログ
---------------------------------------------------------------

.. topic:: 画面レイアウト

    .. figure:: ../../img/店舗預かり確認ダイアログ.png
        :align: center

        店舗預かり確認ダイアログ

.. topic:: 構成一覧

    .. list-table:: 店舗預かり確認ダイアログ
        :header-rows: 1
        :align: center

        * - 識別ID
          - 項目名
          - 種別
          - 説明
        * - ①
          - 確認メッセージ
          - ラベル
          - 店舗での作物預かりの確認を促すメッセージ。
        * - ②
          - キャンセルボタン
          - ボタン
          - 店舗預かり確認をキャンセルするボタン。

            * キャンセルボタンを押下した場合、ダイアログを閉じる

        * - ③
          - 店舗預かりボタン
          - ボタン
          - 店舗預かりを処理するボタン。

            * 店舗預かりボタンを押下した場合、店舗預かりを処理し、ダイアログを閉じる

---------------------------------------------------------------
受取り確認ダイアログ
---------------------------------------------------------------

.. topic:: 画面レイアウト

    .. figure:: ../../img/受取り確認ダイアログ.png
        :align: center

        受取り確認ダイアログ

.. topic:: 構成一覧

    .. list-table:: 受取り確認ダイアログ
        :header-rows: 1
        :align: center

        * - 識別ID
          - 項目名
          - 種別
          - 説明
        * - ①
          - 確認メッセージ
          - ラベル
          - 受取りの確認を促すメッセージ。
        * - ②
          - キャンセルボタン
          - ボタン
          - 受取り確認をキャンセルするボタン。

            * キャンセルボタンを押下した場合、ダイアログを閉じる

        * - ③
          - 受取りボタン
          - ボタン
          - 受取りを処理するボタン。

            * 受取りボタンを押下した場合、受取りを処理し、ダイアログを閉じる
