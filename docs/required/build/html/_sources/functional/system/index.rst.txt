---------------------------------------------------------------
システム構成図
---------------------------------------------------------------

.. topic:: 構成図

    .. figure:: img/システム構成図.png
        :align: center

        システム構成図

.. topic:: 構成一覧

    .. list-table:: システム構成一覧
        :header-rows: 1
        :align: center

        * - 構成要素
          - 役割
        * - ローカルマシン
          - イントラネット内にあるフードチェーンシステムを提供するハードウェア。
        * - Webサーバー
          - | フードチェーンシステムのコンテンツを配信する。
            | APサーバーへのリクエストのプロキシを行う。
        * - APサーバー
          - フードチェーンシステムのAPIを提供する。
        * - DBサーバー
          - フードチェーンシステムで利用するデータを格納する。
        * - ngrok agent
          - ローカルマシン上で稼働しているサービスをngrok edgeにトンネリングする。
        * - ngrok edge
          - ngrok agentでトンネリングされたサービスをインターネット上に公開する。
        * - PC/スマートフォン/タブレット
          - ブラウザを通してフードチェーンシステムを利用するハードウェア。

---------------------------------------------------------------
ソフトウェア構成図
---------------------------------------------------------------

.. topic:: 構成図

    .. figure:: img/ソフトウェア構成図.png
        :align: center

        ソフトウェア構成図

.. topic:: 構成一覧

    .. list-table:: ソフトウェア構成一覧
        :header-rows: 1
        :align: center

        * - 構成要素
          -
          - 役割
        * - ngrok agent
          -
          - ローカルマシン上で稼働しているサービスをngrok edgeにトンネリングする。
        * - Docker
          -
          - 軽量で高速に動作するコンテナ型の仮想環境用プラットフォームを提供し、システムを構成するマイクロサービスをコンテナで運用する。
        * - Node.js
          -
          - JavaScriptの実行環境を提供し、ローカルマシン上での開発やビルドに利用される。
        * - Webサーバーコンテナ
          - nginx
          - Webサーバーであり、Webコンテンツの配信と、APサーバーへのリクエストのディスパッチを行う。
        * - APサーバーコンテナ
          - PostgresSQL
          - リレーショナルデータベース管理システムであり、データの格納先として利用する。
        * - Webコンテンツ
          - TypeScript
          - JavaScriptを拡張する静的型付けをサポートするプログラミング言語で、Webコンテンツの実装に用いる。
        * -
          - Svelte
          - Webアプリケーションのフレームワーク。
        * -
          - routify
          - Svelteアプリケーションのルーティングを簡単に管理するライブラリ。
        * -
          - Material UI
          - マテリアルデザインをベースにしたSvelteアプリケーション向けのUIコンポーネントライブラリ。
        * -
          - TailwindCSS
          - 効率的なスタイルシート構築を可能にするカスタマイズ可能なCSSフレームワーク。
        * - API
          - TypeScript
          - JavaScriptを拡張する静的型付けをサポートするプログラミング言語で、APIの実装に用いる。
        * -
          - NestJS
          - Node.jsのサーバーサイドアプリケーションフレームワーク。
        * -
          - passport.js
          - 認証を簡素化するNode.js向け認証ミドルウェアライブラリ。
        * -
          - TypeORM
          - JavaScript/TypeScript向けのオブジェクトリレーショナルマッパー（ORM）ライブラリ。
        * -
          - node-postgres
          - Node.jsでPostgreSQLデータベースとの通信を容易にするドライバとなるライブラリ。

---------------------------------------------------------------
ネットワーク構成図
---------------------------------------------------------------

.. topic:: 構成図

    .. figure:: img/ネットワーク構成図.png
        :align: center

        ネットワーク構成図

.. topic:: 構成一覧

    .. list-table:: ネットワーク構成一覧
        :header-rows: 1
        :align: center

        * - 通信経路
          - 説明
        * - ngrok edge
          - | http://XXXXXXXX.ngrok.jp
            | https://XXXXXXXX.ngrok.jp
            | という形式でホスティングされ、インターネット上に公開される。
        * - ↓
          - ngrok edgeとngrok agentの間で通信をトンネリングする。
        * - ngrok
          - ngrok agentではWebサーバーの80ポートを公開する。
        * - ↓
          - ngrok edgeで受けた通信がトンネリングされngrok agentからWebサーバーの80ポートにHTTP通信を仲介する。
        * - Webサーバー（nginx）
          - Nginxをプロキシサーバーとして80ポートで公開し、Webコンテンツへのリクエストはコンテンツをレスポンスし、APIへのリクエストはAPサーバーにディスパッチする。
        * - ↓
          - APサーバーの3000ポートにHTTP通信をディスパッチする。
        * - APIサーバー
          - APIを3000ポートで公開する。
        * - ↓
          - DBサーバーの5432ポートへTCP/IPを通して、問い合せ（クエリ）を行う。
        * - DBサーバー
          - PostgreSQLを5432ポートで稼働する。

---------------------------------------------------------------
アプリケーション機能構成図
---------------------------------------------------------------

.. topic:: 構成図

    .. figure:: img/アプリケーション機能構成図.png
        :align: center

        アプリケーション機能構成図

.. topic:: 構成一覧

    .. list-table:: アプリケーション機能構成一覧
        :header-rows: 1
        :align: center

        * - 機能分類
          - 説明
        * - アカウント管理
          - アカウントの作成や、ログインといったアカウントについて管理する機能を提供する機能郡。
        * - 出品管理
          - 作物の出品、閲覧、編集などの出品について管理する機能を提供する機能郡。
        * - 予約管理
          - 作物の予約、確認、編集などの予約について管理する機能を提供する機能郡。
        * - 物流管理
          - 物流に関する設定や、物流情報を管理する機能を提供する機能郡。
